<?php
/**
 * Created by PhpStorm.
 * User: n8036039
 * Date: 10/29/14
 * Time: 10:26 PM
 */
include_once "Input.php";
include_once "classes/Vulnerability.php";
include_once "View.php";

class VulnerabilityView extends View{
	private $vulnerability;
	private $idVulnerability;
	private $name;
	private $description;
	private $fix;
	private $notes;
	private $controller;

	function __construct(Vulnerability $vulnerability) {
		$this->vulnerability = $vulnerability;
		$this->idVulnerability = new Hidden("id_idVulnerability", "idVulnerability", $vulnerability->idVulnerability(), "idVulnerability");
		$this->name = new Text("id_name", "Name", $vulnerability->name(), "name");
		$this->description = new TextArea("id_description", "Description", $vulnerability->description(), "description");
		$this->fix = null;
		$this->notes = null;
		$this->controller = new VulnerabilityController();
	}

	public function input_form($action="insert.php", $value="insert_vulnerability", $submit="Add Vulnerability") {
		$output = '<form class="form-horizontal" role="form" action="'.$action.'" method="post">';
		$output .= '<input type="hidden" name="form" value="'.$value.'">';
		$output .= $this->idVulnerability->input();
		$output .= $this->name->input();
		$output .= $this->description->input();
		$output .= $this->fix;
		$output .= $this->notes;
		$output .= '<input type="submit" value="'.$submit.'" class="btn btn-success">';
		$output .= '</form>';
		return $output;
	}

	public function output_form() {
		$output = '<form class="form-horizontal" role="form">';
		$output .= $this->idVulnerability->input();
		$output .= $this->name->output();
		$output .= $this->description->output();
		$output .= $this->fix;
		$output .= $this->notes;
		$output .= '</form>';
		return $output;
	}

	public function list_all() {
		$output = '';
		$output .= '<table class="table table-hover">';
		$output .= '
				<thead>
					<tr>
					  <th>Name</th>
					  <th>Description</th>
					</tr>
				</thead>
				<tbody>';
		$list = $this->controller->select();
		foreach ($list as $item){
			$output .= '
        <tr>
          <td>'.$item['name'].'</td>
          <td>'.$item['description'].'</td>
        </tr>';
		}
		$output .= '
				</tbody>
			</table>';

		return $output;
	}

	public function select() {
		// TODO: Implement select() method.
	}

	public function multi_select() {
		// TODO: Implement multi_select() method.
	}
}